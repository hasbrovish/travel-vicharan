<section class="testimonials-section py-5 bg-light">
  <div class="container">
    <div class="text-center mb-5">
      <p class="section-warm-intro">ðŸ’¬ Real stories from real travelers</p>
      <h2 class="display-6 fw-bold mb-3">Hear from Our Travelers</h2>
      <p class="text-muted">Real journeys. Real stories.</p>
    </div>

    <div class="testimonials-carousel position-relative"
         (mouseenter)="pauseAutoRotate()"
         (mouseleave)="resumeAutoRotate()"
         (keydown)="handleKeydown($event)"
         tabindex="0"
         role="region"
         aria-label="Testimonials carousel">
      <!-- Navigation Arrows -->
      <button class="carousel-nav carousel-nav-prev" 
              (click)="previous()" 
              [disabled]="!canGoPrevious"
              aria-label="Previous testimonials">
        <i class="bi bi-chevron-left"></i>
      </button>

      <button class="carousel-nav carousel-nav-next" 
              (click)="next()" 
              [disabled]="!canGoNext"
              aria-label="Next testimonials">
        <i class="bi bi-chevron-right"></i>
      </button>

      <!-- Single Centered Testimonial -->
      <div class="testimonial-center-wrapper">
        <div class="testimonial-card-centered" 
             [@fadeSlide]="currentIndex"
             role="article"
             [attr.aria-label]="'Testimonial ' + (currentIndex + 1) + ' of ' + testimonials.length">
          <div class="card-body">
            <!-- Rating Stars -->
            <div class="rating mb-4">
              <i class="bi bi-star-fill text-warning" *ngFor="let star of getStarArray(currentTestimonial.rating)"></i>
            </div>

            <!-- Quote Text -->
            <p class="testimonial-text-centered">"{{ currentTestimonial.text }}"</p>

            <!-- Customer Info -->
            <div class="customer-info-centered d-flex flex-column align-items-center mt-4">
              <img [src]="currentTestimonial.image" 
                   [alt]="currentTestimonial.name" 
                   class="customer-avatar-centered mb-3"
                   loading="lazy">
              <div class="text-center">
                <h6 class="mb-1 fw-bold">{{ currentTestimonial.name }}</h6>
                <small class="text-muted d-block">{{ currentTestimonial.trip }}</small>
                <div class="d-flex align-items-center justify-content-center mt-2">
                  <small class="text-muted me-2">{{ currentTestimonial.date }}</small>
                  <span class="verified-badge" *ngIf="currentTestimonial.verified">
                    <i class="bi bi-patch-check-fill text-primary"></i> Verified
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Indicators -->
      <div class="carousel-indicators mt-4 text-center">
        <button *ngFor="let indicator of slideIndicators; let i = index"
                class="indicator-dot"
                [class.active]="i === currentIndex"
                (click)="goToSlide(i)"
                [attr.aria-label]="'Go to slide ' + (i + 1)">
        </button>
      </div>
    </div>
  </div>
</section>

<a [routerLink]="['/packages', package.id]" class="package-card">
  <div class="package-image-wrapper">
    <img [src]="package.imageUrl" [alt]="package.name" class="package-image">
    <div class="package-overlay"></div>

    <!-- Status Badge (top right) -->
    <span *ngIf="firstDeparture" class="status-badge"
          [ngClass]="'status-' + getStatusClass(firstDeparture.status)">
      {{ getStatusText(firstDeparture.status) }}
    </span>

    <!-- Type Badge (top left) -->
    <span class="type-badge">
      {{ package.type }}
    </span>

    <!-- Duration Badge (bottom right) -->
    <span class="duration-badge">
      <i class="bi bi-calendar-event me-1"></i>{{ package.days }}D/{{ package.nights }}N
    </span>
  </div>

  <div class="package-info">
    <h3 class="package-name">{{ package.name }}</h3>

    <p class="package-description">
      {{ package.description.substring(0, 100) }}{{ package.description.length > 100 ? '...' : '' }}
    </p>

    <!-- Rating -->
    <div class="package-rating">
      <div class="stars">
        <i class="bi bi-star-fill" *ngFor="let star of getStarArray(package.rating)"></i>
        <i class="bi bi-star-half" *ngIf="package.rating % 1 !== 0"></i>
      </div>
      <span class="review-count">({{ package.totalReviews }} reviews)</span>
    </div>

    <!-- Destinations as highlight tags -->
    <div class="package-highlights">
      <span class="highlight-tag" *ngFor="let dest of package.destinations.slice(0, 3)">
        <i class="bi bi-geo-alt-fill me-1"></i>{{ dest }}
      </span>
    </div>

    <!-- Category tag -->
    <div class="package-meta">
      <span class="category-tag">
        <i class="bi bi-tag-fill me-1"></i>{{ package.category }}
      </span>
    </div>

    <!-- Price and CTA -->
    <div class="package-footer">
      <div class="price-section">
        <span class="price-label">Starts from</span>
        <div class="price">{{ package.currency }} {{ startingPrice | number }}</div>
        <small *ngIf="firstDeparture && package.pricingType === 'DATE_BASED'" class="next-departure">
          <i class="bi bi-calendar-event me-1"></i>Next: {{ firstDeparture.date | date:'dd MMM' }}
        </small>
      </div>
      <div class="view-details-link">
        View Details <i class="bi bi-arrow-right ms-2"></i>
      </div>
    </div>
  </div>
</a>
